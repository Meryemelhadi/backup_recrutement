<?php $properties["query"]="SELECT COUNT(*) as nbrecords FROM _rct_vacancy,_rct_vacancy_total_control,_rct_vacancy_readonly WHERE ((_rct_vacancy._creator='".$GLOBALS["_NX_user"]->getProperty("user.oid","",true)."')  OR (_rct_vacancy_total_control._key=_rct_vacancy._oid AND _rct_vacancy_total_control._val='".$GLOBALS["_NX_user"]->getProperty("user.oid","",true)."')  OR (_rct_vacancy_readonly._key=_rct_vacancy._oid AND _rct_vacancy_readonly._val='".$GLOBALS["_NX_user"]->getProperty("user.oid","",true)."') )  AND ".$this->getWhereClause("_rct_vacancy._name",$this->getFieldParam("name","null","|",$record,""),'LIKE','OR','%','%',true,false,'|','false')." AND ".$this->getWhereClause("_rct_vacancy._code",$this->getFieldParam("code","null","|",$record,""),'LIKE','OR','%','%',true,false,'|','false')." AND ".$this->getWhereClause("_rct_vacancy._category_oid",$this->getFieldParam("category_oid","null","|",$record,""),'=','OR','','',true,false,'|','false')." AND ".$this->getWhereClause("_rct_vacancy._subsidiary_oid",$this->getFieldParam("subsidiary_oid","null","|",$record,""),'=','OR','','',true,false,'|','false')." AND ".$this->getWhereClause("_rct_vacancy._service_oid",$this->getFieldParam("service_oid","null","|",$record,""),'=','OR','','',true,false,'|','false')." AND ".$this->getWhereClause("_rct_vacancy._duty_station_oid",$this->getFieldParam("duty_station_oid","null","|",$record,""),'=','OR','','',true,false,'|','false')." AND ".$this->getWhereClause("_rct_vacancy._current_step",$this->getFieldParam("current_step","null","|",$record,""),'=','OR','','',true,false,'|','false')." AND ".$this->getWhereClause("_rct_vacancy._progress_level",$this->getFieldParam("progress_level","null","|",$record,""),'=','OR','','',true,false,'|','false')." AND ".$this->getWhereClause("_rct_vacancy._application_type",$this->getFieldParam("application_type","0","|",$record,""),'LIKE','OR','%','%',true,false,'|','false')." AND ".$this->getWhereClause("_rct_vacancy._opening_date",$this->getFieldParam("opening_date","null","|",$record,""),'=','OR','','',true,false,'|','false')." AND ".$this->getWhereClause("_rct_vacancy._closing_date",$this->getFieldParam("closing_date","null","|",$record,""),'=','OR','','',true,false,'|','false')." AND _rct_vacancy._workflow_state='2' AND ".$this->getWhereClause("_rct_vacancy._archive_state",$this->getFieldParam("archive_state","null","|",$record,""),'=','OR','','',true,false,'|','false')." GROUP BY _rct_vacancy._oid "; ?>